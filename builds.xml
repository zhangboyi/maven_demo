<?xml version="1.0" encoding="UTF-8"?>
<project name="Jacoco" xmlns:jacoco="antlib:org.jacoco.ant" default="rebuild">
    <!--源代码路径-->
<!--    <property name="sourcecode" value="/var/lib/jenkins/workspace/maven_test" />-->
    <property name="jacocoantPath" value="/opt/jacoco/lib/jacocoant.jar"/>
    <property name="integrationJacocoexecPath" value="./jacoco-integration.exec"/>
    <property name="result.dir" location="./target"/>
    <property name="result.classes.dir" location="${result.dir}/classes"/>
    <property name="src.dir" location="./src/main/java"/>
    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
        <classpath path="${jacocoantPath}" />
    </taskdef>
    <target name="compile">
        <mkdir dir="${result.classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${result.classes.dir}" debug="true" includeantruntime="false"/>
    </target>
    <target name="dump" depends="compile">
        <jacoco:dump address="10.65.229.121" port="8083" reset="true" destfile="${integrationJacocoexecPath}" append="false"/>
    </target>
    <target name="rebuild" depends="dump,compile"/>
</project>


